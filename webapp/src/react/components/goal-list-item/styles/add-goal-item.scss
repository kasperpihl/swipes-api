@import '~styles/_vars.scss';
@import '~styles/_mixins.scss';

// ======================================================
// Blocl
// ======================================================

.add-goal-item {
  $b: &;
  $flexIgnoreList: '#{$b}__indicator';

  @include size(100%, 67px);
  @include flexContainer('row', left, center, $flexIgnoreList);
  border-top: 1px solid $deepBlue-5;
  padding: 0 6px;
  padding-right: 6px;
  transition: .15s ease;
}

// ======================================================
// Elements
// ======================================================

.add-goal-item {
  $b: &;

  &__assignees {
    @include flexContainer('row', center, center);
    padding-left: 6px;
    transition: .2s ease;
    order: 3;
  }

  &__input {
    @include size(100%, auto);
    @include font(15px, $deepBlue-100, 24px);
    @include flexContainer('row', left, center);
    order: 2;

    &::-webkit-input-placeholder {
      @include font(15px, $deepBlue-30, 24px);
      font-style: italic;
    }

    &:not(:placeholder-shown) + .add-step__indicator {
      border: 2px solid $deepBlue-100;
      color: rgba($deepBlue-100, 1);
      transition: .3s ease;
    }
  }

  &__indicator {
    @include size(14px);
    @include flexContainer('row', center, center);
    border: 2px solid $deepBlue-20;
    border-radius: 50%;
    margin-right: 15px;
    order: 1;
    transition: .2s ease;
  }

  &__button {
    @include size(36px);
    position: absolute;
    right: 6px; top: calc(50% - (36px / 2) + 4px);
    opacity: 0;
    pointer-events: none;
    transform: scale(0);
    transition: .2s ease;
  }

  &__loader {
    @include size(24px);
    border-radius: 50%;

    &:before {
      @include size(24px);
      background-color: $blue-100;
      border-radius: 50%;
      content: '';
      left: 0; top: 0;
      opacity: 0;
      position: absolute;
      transition: .2s ease;
      clip-path: polygon(100% 0, 100% 50%, 50% 50%, 50% 0);
      -webkit-clip-path: polygon(100% 0, 100% 50%, 50% 50%, 50% 0);
    }

    &:after {
      @include size(18px);
      background-color: $bg;
      border-radius: 50%;
      content: '';
      left: 3px; top: 3px;
      opacity: 0;
      position: absolute;
      transition: .2s .2s ease;
    }
  }
}

// ======================================================
// Modifiers
// ======================================================

.add-goal-item {
  $b: &;

  &--active {

    #{$b}__assignees {
      margin-right: 46px;
      transition: .2s ease;
    }

    #{$b}__button {
      opacity: 1;
      pointer-events: all;
      transform: scale(1);
      transition: .2s .2s ease;
    }
  }

  &--focused {
    .add-goal-item__indicator {
      border: 2px solid $deepBlue-50;
    }
  }

  &--loading {

    #{$b}__indicator {
      @include size(24px);
      border: 0px solid transparent !important;
      transition: .2s;
    }

    #{$b}__loader {
      animation: rotateAddLoader 1s .25s cubic-bezier(.56,.31,.52,.78) infinite;

      &:before {
        opacity: 1;
        transition: .2s .2s ease;
      }

      &:after {
        opacity: 1;
        transition: 0s .2s ease;
      }
    }
  }
}
