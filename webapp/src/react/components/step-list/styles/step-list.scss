@import '~styles/_vars.scss/';
@import '~styles/_mixins.scss/';

// ======================================================
// Block
// ======================================================

.step-list {
  @include size(100%, auto);
  margin-bottom: 60px;
}

.step-list-item {
  $b: &;
  $flexIgnoreList: '#{$b}__indicator', '#{$b}__assignees';

  @include size(100%, 54px);
  @include flexContainer('row', left, center, $flexIgnoreList);
  border-bottom: 1px solid $deepBlue-5;
  transition: .15s ease;
}

// ======================================================
// Elements
// ======================================================

.step-list-item {

  &__indicator {
    @include size(39px, 100%);
    @include flexContainer('row', left, center);
  }

  &__icon {
    @include size(24px);
    transition: .15s ease;
  }

  &__svg {
    @include centerAbsolute();
    transition: .15s ease;

    &--transition {
      @include size();
      @include svg-color($green-color);
      padding: 2px;
      stroke-dashoffset: 0;
      stroke-dasharray: 19px 100px;
    	stroke-miterlimit: 10;
      stroke-width: 2;
      transition: .7s ease;
    }
  }

  &__title {
    @include size(100%, auto);
    @include font(12px, $deepBlue-80, 18px, 500);
  }
}

// Tooltip

.step-list-item {

  &__tooltip {
    @include font(12px, $bg, 500);
    @include centerAbsolute(vertical, $addToTransform: translateX(-110%));
    background-color: $deepBlue-100;
    padding: 10px 15px;
    opacity: 0;
    pointer-events: none;
    transition: .05s ease;

    &:before {
      @include size(10px);
      @include centerAbsolute(vertical, right, rotate(45deg));
      background-color: $deepBlue-100;
      content: '';
      right: -5px;
      z-index: -1;
    }
  }
}

// ======================================================
// Modifiers
// ======================================================

.step-list-item {
  $b: &;

  &--completed {
    opacity: .5;
    transition: .15s ease;
  }

  &--current {

    #{$b}__svg--transition {
      @include svg-color($deepBlue-50);
      stroke-dashoffset: 0;
    	stroke-dashoffset: -23px;
      stroke-dasharray: 69px 26px;
    }
  }

  &--future {
    opacity: .5;
    transition: .15s ease;

    #{$b}__svg--transition {
      @include svg-color($deepBlue-50);
      stroke-dashoffset: 0;
    	stroke-dashoffset: -23px;
      stroke-dasharray: 69px 26px;
    }
  }

  &:not(&--completed)#{&}--hover {

    #{$b}__svg--transition {
      @include svg-color($green-color);
      stroke-dashoffset: 0;
      stroke-dasharray: 19px 100px;
    }
  }

  &:not(&--current):not(&--future)#{&}--hover {
    #{$b}__svg--transition {
      @include svg-color($deepBlue-50);
      stroke-dashoffset: 0;
    	stroke-dashoffset: -23px;
      stroke-dasharray: 69px 26px;
    }
  }

  &--loading {
    #{$b}__svg--transition {
      @include svg-color($blue-100);
      animation: rotateIconLoader 1s .4s linear infinite;
      stroke-dashoffset: 0;
  		stroke-dashoffset: -50px;
  		stroke-dasharray: 20px 100px;
    }
  }

  &--hover {
    opacity: 1;
  }
}

// ======================================================
// Targeting
// ======================================================

.step-list-item {

  &:first-child {
    border-top: 1px solid $deepBlue-5;
  }
}

// ======================================================
// Hover
// ======================================================


.step-list {

}

.step-list-item {
  $b: &;

  &:hover {
    opacity: 1;
  }

  &__indicator:hover + &__tooltip {
    opacity: 1;
    transition: .3s ease;
  }
}

// ======================================================
// Animation
// ======================================================

@keyframes rotateIconLoader {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
