@import '~styles/_vars.scss';
@import '~styles/_mixins.scss';
@import '~styles/_functions.scss/';

// ======================================================
// Block
// ======================================================

.milestone {
  @include size(300px, auto);
  border-radius: 6px;
  padding: 30px 15px;

  &:before {
    @include size(100%);
    background-color: $blue-5;
    content: '';
    left: 0; top: 0;
    position: absolute;
    z-index: -1;
    -webkit-clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%);
  }

  &:after {
    @include size(100%);
    content: '';
    position: absolute;
    left: 0; top: 0;
    transition: .25s ease-out;
    z-index: -1;
    -webkit-clip-path: polygon(0 0, 0 0, 0 100%, 0% 100%);
  }

  .progress {
    @include size(54px);
    @include centerAbsolute();
    @include flexContainer('row', center, center);
    background-color: $bg;
    border-radius: 50%;
  }

  .last-activity {
    $b: &;
    $flexIgnoreList: '#{$b}__left', '#{$b}__icon}';

    @include size(100%, auto);
    @include flexContainer('row', left, center, $selectorsToIgnoreFlex: $flexIgnoreList);
  }
}

// ======================================================
// Elements
// ======================================================

.milestone {

  &__seperator {
    @include size(100%, 1px);
    background-color: $deepBlue-100;
    display: none;
  }

  &__title {
    @include size(100%, auto);
    @include font(21px, $deepBlue-100, 27px);
    @include truncateString();
  }

  &__subtitle {
    @include size(100%, auto);
    @include font(11px, $deepBlue-50, 15px, 500);
    margin-top: 6px;
  }

  &__progress {
    @include size(100%, 212px);
    border-top: 1px solid $deepBlue-5;
    border-bottom: 1px solid $deepBlue-5;
    margin-bottom: 12px;
    margin-top: 24px;
  }

  &__svg {
    @include size(150px);
    @include centerAbsolute($addToTransform: rotateY(180deg));
    transition: .5s ease;

    path {
      stroke-miterlimit: 10;
      stroke-width: 48px;
    }

    &--bg {
      @include svg-color($deepBlue-5);
    }

    &--fg {
      @include svg-color($tisho-green);
      stroke-dasharray: 320.4876403808594;
    	stroke-dashoffset: 160;
    }
  }
}

.milestone .last-activity {
  $b: getElementSelectorInBlock(#{&}, '.milestone');

  #{$b}__left {
    @include flexContainer('row', center, center);

    img {
      @include size(30px);
      border-radius: 50%;
    }
  }

  #{$b}__right {
    @include size(100%, auto);
    padding-left: 12px;
  }

  #{$b}__name {
    @include size(100%, auto);
    @include font(12px, $deepBlue-60, 15px, 500);
  }

  #{$b}__label {
    @include size(100%, auto);
    @include font(12px, $deepBlue-50, 15px);
  }

  #{$b}__icon {
    @include size(24px);
  }

  #{$b}__svg {
    @include size(24px);
    @include svg-color($deepBlue-100);
    opacity: 0;
    transition: .3s ease;
    transform: translateX(-15px);
  }
}

.milestone .progress {
  $b: getElementSelectorInBlock(#{&}, '.milestone');

  #{$b}__dot {
    @include size(6px);
    background-color: $deepBlue-100;
    border-radius: 50%;
  }

  #{$b}__number {
    @include size(100%);
    @include centerAbsolute();
    @include flexContainer('row', center, center);
    @include font(12px, $deepBlue-100, 15px, 500);
    background-color: $bg;
    border-radius: 50%;
    -webkit-clip-path: circle(0% at 50% 50%);
    transition: .25s ease-out;
  }
}

// ======================================================
// Targeting
// ======================================================

.milestone {
  $b: &;

  @include styleElementsAfter(4) {
    padding-top: 45px;
    #{$b}__seperator {
      display: block;
      transform: translateY(-15px)
    }
  }
}

// ======================================================
// Hovers
// ======================================================

.milestone {
  $b: &;

  &:hover {
    box-shadow: 0 6px 12px 1px rgba(0,12,47, 0.15);
    transition: .25s ease-in;

    &:before {
      -webkit-clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
      transition: .25s ease-in;
    }

    &:after {
      transition: .25s ease-out;
    }

    #{$b}__svg {
      &--bg {
        @include svg-color($deepBlue-20);
        transition: .25s .15s ease-out;
      }
    }

    .progress__number {
      -webkit-clip-path: circle(50.0% at 50% 50%);
      transition: .5s .15s ease-out;
    }

    .last-activity__svg {
      opacity: 1;
      transition: .25s .15s ease;
      transform: translateX(0px);
    }
  }
}
