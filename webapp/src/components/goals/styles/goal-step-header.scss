@import '../../global-styles/vars/';
@import '../../global-styles/mixins/';

$fade: .4;

.step-header {
  $b: &;

  @include size(100%, auto);
  @include flex(center, flex-start);
  display: flex !important;
  padding: 0 22px;
  position: relative;
  transition: opacity .1s;

  &:first-of-type {
    padding-bottom: 15px;
  }

  &:last-of-type {
    padding-top: 15px;
    padding-bottom: 0;
  }

  &:not(:first-of-type):not(:last-of-type) {
    padding-top: 15px;
    padding-bottom: 15px;
  }

  &--last {
    padding-bottom: 0;

    &:before {
      @include size(2px, 70%);
    }
  }

  & > *:not(&__indicator) {
		opacity: $fade;
    transition: opacity .1s;
	}

  &:hover > * {
    opacity: 1;
    transition: opacity .1s;
  }

  &__indicator {
    @include size(30px);
    @include flex();
    background-color: $bg;
    border-radius: 50%;
    position: relative;

    &#{&}--index {
      color: rgba($blue-120, $fade);
      font-size: 15px;
      transition: color .1s;

      &:after {
        @include size(30px);
        border-radius: 50%;
        border: 2px solid $blue-40;
        content: "";
        left: 0; top: 0;
        position: absolute;
        opacity: $fade;
        transition: opacity .1s;
      }
    }

    &#{&}--completed {
      background-color: lighten($green-color, 30%);

      svg {
        @include size(12px);
        fill: $bg;
      }
    }
  }

  &__content {
    $contentWidth: calc(100% - 30px - 30px);

    @include size($contentWidth, 39px);
    @include flex(flex-start, space-between, column);
    padding-left: 21px;
    user-select: none;
  }

  &__title {
    color: $deepBlue-100;
    font-size: 15px;
    user-select: auto;
  }

  &__type {
    color: $blue-140;
    font-size: 11px;
    letter-spacing: 1px;
    opacity: .3;
    text-transform: uppercase;
    user-select: auto;
  }

  &__assignees {
    @include size(30px);
    position: relative;

    img {
      @include size();
      border-radius: 50%;
    }

    &__count {
      @include size(30px);
      @include flex();
      background-color: rgba($deepBlue-100, .4);
      border-radius: 50%;
      color: white;
      font-size: 15px;
      left: 0; top: 0;
      position: absolute;

      &:hover {
        background-color: rgba($deepBlue-100, .7);
      }

      &:empty {
        display: none;
      }
    }
  }

  &:hover & {

    &__indicator {
			&--index {
				color: $blue-120;
        transition: color .1s;

        &:after {
          opacity: 1;
          transition: opacity .1s;
        }
			}

			&--completed {
        background-color: $green-color;
        transition: background-color .1s;
			}
		}
  }

  &#{&}--active {
    z-index: 9;

    &:hover {
      z-index: 10;
    }
  }

  &#{&}--active > * {
    opacity: 1;
    transition: opacity .1s;
  }

  &#{&}--active & {
    &__indicator {
			&--index {
				color: $blue-120;
        transition: color .1s;

        &:after {
          opacity: 1;
          transition: opacity .1s;
        }
			}

			&--completed {
        background-color: $green-color;
        transition: background-color .1s;
			}
		}
  }

  &__icons {
    @include size(22px, 100%);
    @include flex();
    margin: 0 21px;
  }

  &__icon {
    @include size(22px);
    fill: $deepBlue-40;
    transition: .1s;
  }

  &__icons:hover &__icon {
    fill: $blue-100;
  }

  &__assignees {
    @include flex();
    @include size(30px, 100%);
    margin: 0 17px;
    position: relative;

    &:hover {

      #{$b}__tooltip {
        display: block;
      }
    }
  }

  &__assignee {
    @include size(30px);

    img {
      @include size();
      border-radius: 50%;
    }
  }

  &__assignee-count {
    @include flex();
    @include size(30px);
    background-color: rgba($deepBlue-100, .4);
    border-radius: 50%;
    color: white;
    font-size: 13px;
    left: 0; top: 50%;
    position: absolute;
    transform: translateY(-50%);

    &:hover {
      background-color: rgba($deepBlue-100, .8);
      transition: .15s ease-in-out;
    }
  }

  &__tooltip {
    @include size(150px, auto);
    background-color: $deepBlue-100;
    border-radius: 6px;
    display: none;
    left: calc(0px - 90px); bottom: 0;
    position: absolute;
    transform: translateY(calc(100% + 10px));
    z-index: 5;

    &:after {
      @include size(12px);
      background-color: $deepBlue-100;
      content: "";
      position: absolute;
      right: 40px;
      top: -6px;
      transform: rotate(45deg);
    }
  }

  &__tooltip-item {
    color: white;
    font-size: 13px;
    padding: 10px;
    position: relative;
    z-index: 4;

    &:first-of-type {
      @include border-radius(6px, 6px, 0px, 0px);
    }

    &:last-of-type {
      @include border-radius(0px, 0px, 6px, 6px);
    }

    &:hover {
      background-color: $deepBlue-80;
    }
  }
}
